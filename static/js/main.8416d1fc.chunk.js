(this["webpackJsonphello-react"]=this["webpackJsonphello-react"]||[]).push([[0],[,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return changeStudentName})),__webpack_require__.d(__webpack_exports__,"b",(function(){return onLoad})),__webpack_require__.d(__webpack_exports__,"c",(function(){return renderFuncPoints})),__webpack_require__.d(__webpack_exports__,"d",(function(){return toggleGraphCanvas})),__webpack_require__.d(__webpack_exports__,"e",(function(){return toggleGrid})),__webpack_require__.d(__webpack_exports__,"f",(function(){return toggleRenderPoints}));var _media_mili_TB_Downloads_CodeExamples_hello_react_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),appState={userPointsString:"",userPoints:null,canvasGeometry:{xAxisRange:{min:0,max:0},gridCellSize:0,OxyTranslated:{x:null,y:null},xyPointsRanges:{x:{min:1/0,max:-1/0},y:{min:1/0,max:-1/0},xMinMax:0,yMinMax:0},FyRanges:{min:1/0,max:-1/0,yMinMax:0}},tooltipTimeout:!1,Fpoints:null,gridRendered:!1,FpointsCalculated:!1,funcExpression:"",fExpression:null,fExpressionPoints:null,lineParams:"",pointsRendered:!1,graphRendered:!1},OxySpan={x:{min:null,max:null},y:{min:null,max:null}},ACG=appState.canvasGeometry,graphColors=["blue","green","red","magenta","navy","brown","orange"],graphColorsIndex=0,gridContainer,canvas,ctx,canvasDots,ctxDots,canvasGrid,ctxGrid,canvasGraph,ctxGraph,canvasTopGraph,ctxTopGraph,commands,W,H,tooltip,marginL=32,marginT=16,GRID_COLUMNS=10,checkboxGrid;function el(e){var t=document.querySelector(e);return"#canvas"===e.slice(0,7)&&(t.id=e.slice(1)),t}function round(e,t){var n=Math.pow(10,t||0);return Math.round(e*n)/n}function adjustRangesAndGridCells(e,t,n){var a=ACG.xyPointsRanges.x,o=ACG.xyPointsRanges.y;a.min>e&&(a.min=e),a.max<e&&(a.max=e),o.min>t&&(o.min=t),o.max<t&&(o.max=t),ACG.xyPointsRanges={x:{min:a.min,max:a.max},y:{min:o.min,max:o.max}}}function adjustGridMesh(){var e=Math.min(round(W/ACG.xyPointsRanges.xMinMax,1),round(H/ACG.xyPointsRanges.yMinMax,1));appState.FpointsCalculated&&(e=Math.min(e,H/OyRange())),e=e<10?10:e>80?80:Math.floor(e),ACG.gridCellSize!==e&&(ACG.gridCellSize=e,ACG.OxyTranslated={x:Math.round(W*Math.abs(ACG.xyPointsRanges.x.min)/ACG.xyPointsRanges.xMinMax),y:Math.round(H+(Math.min(ACG.FyRanges.min,ACG.xyPointsRanges.y.min)-1)*e)},renderGrid(),ACG.pointsRendered&&renderPoints(),ACG.graphRendered&&renderFuncPoints())}function bezierCurve(e,t,n,a,o){var r,i,s,c=ACG.gridCellSize;function l(e){return{x:ACG.OxyTranslated.x+e.x*c,y:ACG.OxyTranslated.y-e.y*c}}"undefined"==typeof a&&(a=.3),"undefined"==typeof o&&(o=1),n||(n=graphColors[graphColorsIndex++],graphColorsIndex%=graphColors.length);for(var p=0;p<2;p++){ctxGraph.strokeStyle=n||"black",ctxGraph.lineWidth=t||1,1===p&&(ctxGraph.stroke(),ctxGraph.beginPath(),ctxGraph.strokeStyle="black",ctxGraph.lineWidth=1),r=l(e[0]),ctxGraph.moveTo(r.x,r.y);for(var d=0,x=0,u=0,y=0,h=0,m=void 0,g=e.length,v=1;v<g;v++)try{var f=l(e[v]);v+1<g&&(m=l(e[v+1])),m?(i=r,d=((s=m).y-i.y)/(s.x-i.x),h=(u=(m.x-f.x)*-a)*d*o):(u=0,h=0),1===p?renderDot(ctxGraph,r,0):ctxGraph.bezierCurveTo(r.x-x,r.y-y,f.x+u,f.y+h,f.x,f.y),x=u,y=h,r=f}catch(_){console.log("bezier loop: , e")}}renderDot(ctxGraph,r,0),ctxGraph.stroke(),ctxGraph.save()}var changeStudentName=function(){var e=el(".student-name"),t="a"===e.innerText[1];e.innerText=t?"Mia Milutinovic":"Marko Milutinovic",e.classList.toggle("mia")};function functionChanged(){var e=appState.funcExpression.replace(/\s+/g,"")!==el("#funcExpression").value.replace(/\s+/g,"");return e&&(appState.FpointsCalculated=!1,appState.Fpoints=null),e}function funcExpression(str){if(str||(str=appState.funcExpression=el("#funcExpression").value),!str)return null;var fExpression,funcStr=str.split("=")[1];funcStr=funcStr.replace(/(\d+)x/g,"$1*x").replace(/(\d+)\(/g,"$1*(").replace(/xx/g,"x*x");try{fExpression=function fExpression(x){return eval(funcStr)}}catch(e){return alert("Function expression is incorrect\nplease correct.")}return appState.fExpression=fExpression}function funcExpressionPoints(){var e=[],t=OxySpan.x.min,n=OxySpan.y;funcExpression();for(var a=appState.fExpression;t<=OxySpan.x.max;){var o=round(a(t),3);o>=n.min&&o<=n.max&&e.push({x:t,y:o}),t+=.1}return appState.fExpressionPoints=e}function getPoints(e){var t=el("#pointsList").value;if(t!==appState.userPointsString||!appState.FpointsCalculated){appState.pointsRendered=!1,e||(appState.fExpression=funcExpression());var n,a=t.split(" "),o=[];appState.Fpoints=[];for(var r=0;r<a.length;r++){var i=a[r].split(","),s=Object(_media_mili_TB_Downloads_CodeExamples_hello_react_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(i,2),c=s[0],l=s[1],p=null;if(o.push({x:+c,y:+l}),appState.fExpression){try{p=round(appState.fExpression(c),2)}catch(x){n=!0}appState.Fpoints.push({x:+c,y:+p})}adjustRangesAndGridCells(+c,+l,p)}setFyRanges(appState.fExpression),appState.userPoints=o;var d=ACG.xyPointsRanges;if(d.xMinMax=round(+d.x.max-+d.x.min,2),d.yMinMax=round(+d.y.max-+d.y.min,2),(d=ACG.FyRanges).yMinMax=round(d.max-d.min,2),appState.fExpression&&(appState.FpointsCalculated=!0),!n)return appState.userPointsString=t,adjustGridMesh(),appState.userPoints;console.log("fExpression calculation failed")}}function isOutsideOfCanvas(e){var t=e.clientX-marginL-window.scrollX,n=e.clientY-marginT+window.scrollY;return t<=0||t>W||n<=0||n>H}var onLoad=function e(){console.log(e),canvas=el("#canvas"),canvasDots=el("#canvasDots"),canvasGrid=el("#canvasGrid"),canvasGraph=el("#canvasGraph"),canvasTopGraph=el("#canvasTopGraph"),ctx=canvas.getContext("2d"),ctxDots=canvasDots.getContext("2d"),ctxGrid=canvasGrid.getContext("2d"),ctxGraph=canvasGraph.getContext("2d"),ctxTopGraph=canvasTopGraph.getContext("2d"),ctxGraph.tooltips=[],[canvas,canvasDots,canvasGrid,canvasGraph,canvasTopGraph].forEach((function(e,t,n){e.width=window.innerWidth-2*marginL,e.height=window.innerHeight,e.style.left="".concat(marginL,"px"),e.style.top="".concat(marginT,"px"),e.style.opacity="1"})),[ctx,ctxDots,ctxGrid,ctxGraph].forEach((function(e){e.lineWidth=1})),canvasTopGraph.style.opacity="0",W=canvas.width,H=canvas.height,checkboxGrid=el("#checkboxGrid"),commands=el("#commands"),getPoints(),onResizeWindow(),tooltip=el("#tooltip"),(gridContainer=el("#gridContainer")).addEventListener("click",renderFuncPointOrGraph),document.body.addEventListener("mousedown",showCoordinates),document.body.addEventListener("mouseup",hideCoordinates),window.addEventListener("resize",onResizeWindow),checkboxGrid.checked&&renderGrid()};function onResizeWindow(e){[canvas,canvasDots,canvasGrid,canvasGraph].forEach((function(e){e.width=Math.round(window.innerWidth-2*marginL),e.height=Math.round(window.innerHeight),e.style.left="".concat(marginL,"px"),e.style.top="".concat(marginT,"px")})),W=canvas.width,H=canvas.height,appState.userPoints&&userPointStringChanged()&&adjustGridMesh(),commands.style.top="".concat(H+marginT,"px"),commands.style.left="".concat(marginL,"px"),commands.style.width="".concat(W,"px")}function OyRange(){return Math.floor(ACG.FyRanges.max-Math.min(ACG.xyPointsRanges.x.min,ACG.FyRanges.min))}function renderDot(e,t,n){n=void 0===n?2:n,e.beginPath(),e.translate(-.5,-.5),e.arc(t.x,t.y,n,0,2*Math.PI),e.fillStyle="white",e.fill(),e.translate(.5,.5),e.stroke()}var renderFuncPoints=function(){var e=functionChanged();if(userPointStringChanged()||e||(toggleGraphCanvas(!0),!appState.graphRendered)){var t="";appState.fExpressionPoints||funcExpressionPoints();for(var n=0;n<appState.fExpressionPoints.length;n++)t+="<div>(".concat(appState.fExpressionPoints[n].x,", ").concat(appState.fExpressionPoints[n].y,")</div>");setGridTemplates(),gridContainer.innerHTML='<div class="header">Function '.concat(appState.funcExpression," contains the following points</div>")+t,bezierCurve(funcExpressionPoints()),canvasGraph.style.opacity||(canvasGraph.style.opacity=1),gridContainer.style.opacity||(gridContainer.style.opacity="1"),toggleGraphCanvas(!0),appState.graphRendered=!0}};function renderFuncPointOrGraph(e){var t,n=e.target.innerText;n.match(/\s*Function/)?(canvasTopGraph.style.opacity="0"===canvasTopGraph.style.opacity?"1":"0",renderFuncPolygon(appState.Fpoints,10,"yellow","destination-over",ctxTopGraph)):(t=n.match(/\s*(-?[0-9.]+)/g))&&(ctxGraph.globalCompositeOperation="source-over",renderPoints(4,"blue",2,[{x:+t[0],y:+t[1]}],ctxGraph))}function renderFuncPolygon(e,t,n,a,o){for(var r=[],i=0;i<e.length;i++)r.push({x:ACG.OxyTranslated.x+e[i].x*ACG.gridCellSize,y:ACG.OxyTranslated.y-e[i].y*ACG.gridCellSize});renderPixelPolygon(o||ctxGraph,r,t,n,a)}function renderGrid(){renderOxy(),ctxGrid.clearRect(0,0,W,H);var e=ACG.gridCellSize;ctxGrid.beginPath(),ctxGrid.strokeStyle="lightgray";var t=H-20,n=W-20,a=ACG.OxyTranslated.x,o=ACG.OxyTranslated.y;ctxGrid.font="12px serif",ctxGrid.fillStyle="black";var r=Math.round((W-a)/e);OxySpan.x.max=r-1,ACG.xAxisRange.max=r-1;for(var i=1;i<r;i++)ctxGrid.moveTo(a+i*e,20),ctxGrid.lineTo(a+i*e,t),i<r-1&&ctxGrid.fillText(i,a+i*e+1,o+12);ctxGrid.fillText(0,a+1,o+12);var s=Math.round(a/e);OxySpan.x.min=1-s,ACG.xAxisRange.min=-s;for(var c=1;c<s;c++)ctxGrid.moveTo(a-c*e,20),ctxGrid.lineTo(a-c*e,t),ctxGrid.fillText(-c,a-c*e+1,o+12);var l=Math.round(o/e);OxySpan.y.max=l-1;for(var p=1;p<l;p++)ctxGrid.moveTo(20,o-p*e),ctxGrid.lineTo(n,o-p*e),ctxGrid.fillText(p,a+5,o-p*e+6);var d=Math.round((H-o)/e);OxySpan.y.min=1-d;for(var x=1;x<=d;x++)ctxGrid.moveTo(20,o+x*e),ctxGrid.lineTo(n,o+x*e),ctxGrid.fillText(-x,a+5,o+x*e+6);ctxGrid.stroke(),appState.gridRendered=!0,toggleGrid()}function renderLinesCrossPoint(e,t,n,a){var o=Object(_media_mili_TB_Downloads_CodeExamples_hello_react_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(appState.lineParams,2),r=o[0],i=o[1];if(r!==e){var s=round((t-i)/(r-e),4),c=round(n(s),4);renderPoints(3,"red",3,[{x:s,y:c}],ctxGraph);var l=ACG.gridCellSize,p=ACG.OxyTranslated,d=round(s*l+p.x,1)+40,x=round(p.y-c*l,1)-10,u=tooltip.cloneNode(!0);ctxGraph.tooltips.push(u),document.body.appendChild(u),u.style.left="".concat(d,"px"),u.style.top="".concat(x,"px"),u.innerHTML="<span style='font-size:14px;color:yellow'>X(".concat(s,", ").concat(c,")</span>"),console.log("x=".concat(s)),console.log("1st line: y(".concat(s,") = ").concat(r,"*").concat(s," + ").concat(i," = ").concat(round(r*s+i,4))),console.log("2nd line: y(".concat(s,") = ").concat(e,"*").concat(s," + ").concat(t," = ").concat(round(e*s+t,4))),u.style.opacity="1",u.permanent=!0}}function renderLineByTwoPoints(e,t){var n=el("#twoPoints").value,a=el("#twoPoints").value.replace(/\s{2,}/g," ").split(") ("),o=a[0].replace(/[()]/g,"").split(","),r=Object(_media_mili_TB_Downloads_CodeExamples_hello_react_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(o,2),i=r[0],s=r[1],c=a[1].replace(/[()]/g,"").split(","),l=Object(_media_mili_TB_Downloads_CodeExamples_hello_react_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(c,2),p=l[0],d=l[1],x=round((d-s)/(p-i),3),u=round(d-x*p,3),y=u>0?"+":"",h="".concat(x,"*x ").concat(y," ").concat(u);u||(u="+");var m=funcExpression("y(x) = ".concat(h));el(".line-equation").innerHTML+="<br><span style='margin-left:1rem;color:blue'>".concat(n," equation: y(x) = ").concat(h,"</span>");var g=ACG.xAxisRange;bezierCurve([{x:g.min,y:round(m(g.min),2)},{x:g.max,y:round(m(g.max),2)}],1,"green",0,1),appState.lineParams&&(renderLinesCrossPoint(x,u,m),appState.lineParams="",el("#twoPoints").value=""),appState.lineParams=[x,u]}function renderOxy(){null==ACG.OxyTranslated.x&&adjustGridMesh();var e=ACG.OxyTranslated.x,t=ACG.OxyTranslated.y,n=[{x:e,y:0},{x:e+4,y:8},{x:e-4,y:8},{x:e,y:0},{x:e,y:H}],a=[{x:0,y:t},{x:W,y:t},{x:W-8,y:t+4},{x:W-8,y:t-4},{x:W,y:t}];ctx.clearRect(0,0,W,H),ctx.beginPath(),ctx.strokeStyle="gray",ctx.translate(.5,.5),renderPixelPolygon(ctx,n),renderPixelPolygon(ctx,a),ctx.font="20px serif",ctx.fillStyle="gray",ctx.fillText("O",e-25,t+20),ctx.fillText("y",e+10,marginT),ctx.fillText("x",W-20,t+16),canvasGrid.style.opacity=checkboxGrid.checked?"1":"0",ctx.stroke()}function renderPoints(e,t,n,a,o){(o=o||ctxGraph).globalCompositeOperation="source-over";var r=ACG.gridCellSize;a||(a=appState.userPoints||getPoints()),o.beginPath(),o.strokeStyle=t||"#ff0000",o.lineWidth=n||2;for(var i=0;i<a.length;i++){var s=[ACG.OxyTranslated.x+a[i].x*r,ACG.OxyTranslated.y-a[i].y*r],c=s[0],l=s[1];o.moveTo(c,l),o.arc(c,l,e||2,0,2*Math.PI)}o.stroke(),"1"!==canvasGraph.style.opacity&&(canvasGraph.style.opacity=11)}function renderPixelPolygon(e,t,n,a,o){e.beginPath(),e.lineWidth=n||1,e.strokeStyle=a||"black",o&&(e.globalCompositeOperation=o),e.moveTo(t[0].x,t[0].y);for(var r=0;r<t.length;r++)e.lineTo(t[r].x,t[r].y);e.stroke()}var toggleGraphCanvas=function(e){void 0===e?e=el("#funcPoints").checked:el("#funcPoints").checked=e,canvasGraph.style.opacity=gridContainer.style.opacity=e?1:0,ctxGraph.tooltips.forEach((function(t){t.style.opacity=e?1:0}))},toggleGrid=function(){var e=el("#canvasGrid").style;checkboxGrid.checked?(!appState.gridRendered&&appState.userPoints&&renderGrid(),e.opacity="1"):e.opacity="0"},toggleRenderPoints=function(e,t,n){el("#renderPoints").checked?(appState.pointsRendered&&!userPointStringChanged()||(renderPoints(e,t,n,null,ctxDots),appState.pointsRendered=!0),canvasDots.style.opacity="1"):canvasDots.style.opacity="0"};function setFyRanges(e){ACG.FyRanges={min:1/0,max:-1/0,yMinMax:0};for(var t,n=ACG.xyPointsRanges.x.min,a=(ACG.xyPointsRanges.x.max-ACG.xyPointsRanges.x.min)/20,o=0;o<20;o++)t=e(n),ACG.FyRanges.min>t&&(ACG.FyRanges.min=t),ACG.FyRanges.max<t&&(ACG.FyRanges.max=t),n+=a;ACG.FyRanges.yMinMax=ACG.FyRanges.max-ACG.FyRanges.min}function showCoordinates(e){if(!isOutsideOfCanvas(e)){var t=ACG.gridCellSize,n=round((e.clientX-ACG.OxyTranslated.x-canvas.offsetLeft+window.scrollX)/t,1),a=-round((e.clientY-ACG.OxyTranslated.y-canvas.offsetTop+window.scrollY)/t,1);tooltip.style.backgroundColor="navy";for(var o=0;o<appState.userPoints.length;o++){var r=appState.userPoints[o];if(Math.abs(Math.abs(n)-Math.abs(r.x))<.3&&Math.abs(Math.abs(a)-Math.abs(r.y))<.3)return void setTooltip(r.x,r.y,e,2e3)}e.ctrlKey?(el("#funcPoints").checked=!0,renderPoints(3,"green",3,[{x:n,y:a}],ctxGraph),2===el("#twoPoints").value.split("(").length?(el("#twoPoints").value+="( ".concat(n,", ").concat(a,") "),renderLineByTwoPoints(n,a,e)):el("#twoPoints").value="( ".concat(n,", ").concat(a,") ")):setTooltip(n,a,e)}}function userPointStringChanged(){return appState.userPointsString!==el("#pointsList").value&&(getPoints(),!0)}function setTooltip(e,t,n,a){tooltip.style.left="".concat(n.clientX+marginL-window.scrollX,"px"),tooltip.style.top="".concat(n.clientY-marginT+window.scrollY,"px"),tooltip.innerHTML="P(".concat(e,", ").concat(t,")</span>"),tooltip.style.backgroundColor=a?"red":"navy",a&&(appState.tooltipTimeout=!0,setTimeout((function(){tooltip.style.opacity="0",appState.tooltipTimeout=!1,tooltip.style.backgroundColor="navy"}),a)),tooltip.style.opacity="1"}function hideCoordinates(e){tooltip.permanent||appState.tooltipTimeout||(tooltip.style.opacity="0")}function repeate(e,t){for(var n="",a=0;a<t;a++)n+=e;return n}function setGridTemplates(){var e=gridContainer.style;e.gridTemplateColumns=repeate("1fr ",GRID_COLUMNS),e.gridTemplateRows=repeate("auto ",1+Math.ceil(funcExpressionPoints.length/GRID_COLUMNS))}},,,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(3),i=n.n(r);n(10);var s=function(e){return o.a.createElement("div",{className:"container"},o.a.createElement("canvas",{id:"canvas",width:"600",height:"400",className:"canvas2"},"Your browser does not support the canvas element."),o.a.createElement("canvas",{id:"canvasDots",width:"600",height:"400",className:"canvas5"}),o.a.createElement("canvas",{id:"canvasGrid",width:"600",height:"400",className:"canvas3"}),o.a.createElement("canvas",{id:"canvasGraph",width:"600",height:"400",className:"canvas2"}),o.a.createElement("canvas",{id:"canvasTopGraph",width:"600",height:"400",className:"canvas4"}))},c=(n(11),n(1)),l=function(){console.log("pointsStringChanged")},p=function(){console.log("funcExpStringChanged")};function d(){return setTimeout((function(){Object(c.b)()}),400),o.a.createElement(o.a.Fragment,null,o.a.createElement(s,null),">",o.a.createElement("div",{id:"tooltip",className:"tooltip"}),o.a.createElement("div",{className:"student-name",onClick:c.a},"Marko Milutinovic"),o.a.createElement("div",{id:"commands",className:"commanda"}),o.a.createElement("label",{htmlFor:"pointsList"},"User defined points"),o.a.createElement("br",null),o.a.createElement("input",{id:"pointsList",type:"text",placeholder:"User defined points, like -2,-4 1,1 3,4",onChange:l,defaultValue:"-16,-6 -3,1 -2,-1 0,-2 1,1 2,-1 3,4 16,7"}),o.a.createElement("input",{type:"checkbox",id:"renderPoints",onClick:function(){return Object(c.f)()}}),"points",o.a.createElement("input",{id:"checkboxGrid",onClick:function(){return Object(c.e)()},onChange:function(){},defaultChecked:!0,type:"checkbox"}),"grid",o.a.createElement("input",{type:"text",id:"twoPoints"}),o.a.createElement("br",null),o.a.createElement("span",{className:"line-equation"},"Line equation"),o.a.createElement("p",{className:"p-title"},"The function equation uses x values entered above to calculate y values"),o.a.createElement("input",{id:"funcExpression",onChange:p,placeholder:"y(x) = x - 1",type:"text",defaultValue:"y(x) = Math.sin(x)"}),o.a.createElement("button",{onClick:function(){return Object(c.c)()}},"render"),o.a.createElement("input",{type:"checkbox",id:"funcPoints",onClick:function(){return Object(c.d)()}}),"toggle graph",o.a.createElement("div",{id:"gridContainer",className:"grid-container"}),o.a.createElement("br",null))}i.a.render(o.a.createElement(d,null),document.getElementById("root"));var x=d;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[5,1,2]]]);
//# sourceMappingURL=main.8416d1fc.chunk.js.map